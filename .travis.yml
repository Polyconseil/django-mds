language: python
services:
    - postgresql
addons:
  postgresql: "9.6"
    apt:
    packages:
        postgresql-9.6-postgis-2.4
python:
    - "3.6"
    - nightly
env:
install:
    - pip install -e .[dev]
before_script:
    - psql -c 'create database midas;' -U postgres
    - psql -U postgres -c "create extension postgis"
    - python midas/manage.py migrate
script:
    - black
    - flake8
    - pytest
